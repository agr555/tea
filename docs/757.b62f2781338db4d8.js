"use strict";(self.webpackChunkteaCollection=self.webpackChunkteaCollection||[]).push([[757],{9757:(X,b,a)=>{a.r(b),a.d(b,{OrderModule:()=>L});var M=a(6895),_=a(646),e=a(8256),i=a(433),A=a(9751),x=a(4137),f=a(9837);const T=["popupInfo"];let g=(()=>{class o{constructor(n){this.modalService=n,this.data="",this.name="",this.activeModal=(0,e.f3M)(f.Kz)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(f.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-popup-info"]],viewQuery:function(n,t){if(1&n&&e.Gf(T,5),2&n){let u;e.iGM(u=e.CRH())&&(t.popupInfo=u.first)}},inputs:{data:"data",name:"name"},decls:8,vars:1,consts:[["id","modal",1,""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return t.activeModal.dismiss("")}),e.qZA()(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return t.activeModal.dismiss("")}),e._uU(7,"Close "),e.qZA()()()),2&n&&(e.xp6(3),e.Oqu(t.name))}}),o})();var y=a(773),F=a(9019),k=a(529);let I=(()=>{class o{constructor(n){this.http=n}sendOrder(n){return this.http.post(F.N.apiURL+"order-tea",n)}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(k.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var C=a(8875);const q=["popup"],N=["popupDataOk"],J=["popupDataNull"],E=["popupDataErr"],G=["popupFull"],V=["popupInfo"];function U(o,r){1&o&&(e.TgZ(0,"div",36),e._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f. "),e.qZA())}function B(o,r){1&o&&(e.TgZ(0,"div",36),e._uU(1," \u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b. "),e.qZA())}function Q(o,r){1&o&&(e.TgZ(0,"div",36),e._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e. "),e.qZA())}function S(o,r){1&o&&(e.TgZ(0,"div",36),e._uU(1," \u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b. "),e.qZA())}function z(o,r){1&o&&(e.TgZ(0,"div",36),e._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d. "),e.qZA())}function R(o,r){1&o&&(e.TgZ(0,"div",36),e._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +\u0425\u0425\u0425\u0425\u0425\u0425\u0425\u0425\u0425\u0425\u0425 "),e.qZA())}function D(o,r){1&o&&(e.TgZ(0,"div",36),e._uU(1," \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443. "),e.qZA())}function Y(o,r){1&o&&(e.TgZ(0,"div",36),e._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043d\u0434\u0435\u043a\u0441. "),e.qZA())}function H(o,r){1&o&&(e.TgZ(0,"div",37),e._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441. "),e.qZA())}function w(o,r){1&o&&(e.TgZ(0,"div",36),e._uU(1," \u0410\u0434\u0440\u0435\u0441 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b, \u043f\u0440\u043e\u0431\u0435\u043b, \u0441\u043b\u0435\u0448 \u0438 \u0434\u0435\u0444\u0438\u0441. "),e.qZA())}const K=function(){return["/products"]};function P(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"section",1)(1,"div",2)(2,"div",3,4)(4,"div",5)(5,"div",6)(6,"div",7),e._uU(7,"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"),e.qZA(),e.TgZ(8,"button",8),e.NdJ("click",function(){const l=e.CHM(n).$implicit;return e.KtG(l.dismiss(""))}),e.qZA()(),e.TgZ(9,"div",9)(10,"form",10,11)(12,"div",12)(13,"label",13),e._uU(14,"\u0422\u043e\u0432\u0430\u0440"),e.qZA(),e._UZ(15,"input",14),e.qZA(),e.TgZ(16,"div",15)(17,"label",16),e._uU(18,"\u0418\u043c\u044f"),e.qZA(),e.TgZ(19,"input",17),e.NdJ("ngModelChange",function(u){e.CHM(n);const l=e.oxw();return e.KtG(l.formValues.name=u)}),e.qZA(),e.YNc(20,U,2,0,"div",18),e.YNc(21,B,2,0,"div",18),e.qZA(),e.TgZ(22,"div",15)(23,"label",19),e._uU(24,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),e.qZA(),e.TgZ(25,"input",20),e.NdJ("ngModelChange",function(u){e.CHM(n);const l=e.oxw();return e.KtG(l.formValues.last_name=u)}),e.qZA(),e.YNc(26,Q,2,0,"div",18),e.YNc(27,S,2,0,"div",18),e.qZA(),e.TgZ(28,"div",15)(29,"label",21),e._uU(30,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),e.qZA(),e.TgZ(31,"input",22),e.NdJ("ngModelChange",function(u){e.CHM(n);const l=e.oxw();return e.KtG(l.formValues.phone=u)}),e.qZA(),e.YNc(32,z,2,0,"div",18),e.YNc(33,R,2,0,"div",18),e.qZA(),e.TgZ(34,"div",23)(35,"label",24),e._uU(36,"\u0421\u0442\u0440\u0430\u043d\u0430"),e.qZA(),e.TgZ(37,"input",25),e.NdJ("ngModelChange",function(u){e.CHM(n);const l=e.oxw();return e.KtG(l.formValues.country=u)}),e.qZA(),e.YNc(38,D,2,0,"div",18),e.qZA(),e.TgZ(39,"div",23)(40,"label",26),e._uU(41,"\u0418\u043d\u0434\u0435\u043a\u0441"),e.qZA(),e.TgZ(42,"input",27),e.NdJ("ngModelChange",function(u){e.CHM(n);const l=e.oxw();return e.KtG(l.formValues.zip=u)}),e.qZA(),e.YNc(43,Y,2,0,"div",18),e.qZA(),e.TgZ(44,"div",12)(45,"label",28),e._uU(46,"\u0410\u0434\u0440\u0435\u0441"),e.qZA(),e.TgZ(47,"input",29),e.NdJ("ngModelChange",function(u){e.CHM(n);const l=e.oxw();return e.KtG(l.formValues.address=u)}),e.qZA(),e.YNc(48,H,2,0,"div",30),e.YNc(49,w,2,0,"div",18),e.qZA(),e.TgZ(50,"div",12)(51,"label",31),e._uU(52,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u043a\u0430\u0437\u0443"),e.qZA(),e.TgZ(53,"input",32),e.NdJ("ngModelChange",function(u){e.CHM(n);const l=e.oxw();return e.KtG(l.formValues.comment=u)}),e.qZA()(),e.TgZ(54,"div",33)(55,"button",34),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.createOrder())}),e._uU(56,"\u041a\u0443\u043f\u0438\u0442\u044c "),e.qZA(),e.TgZ(57,"div",35),e._uU(58,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."),e.qZA()()()()()()()()}if(2&o){const n=e.MAs(11),t=e.oxw();let u,l,s,h,d,v,c,m,p,Z;e.xp6(8),e.Q6J("routerLink",e.DdM(21,K)),e.xp6(2),e.Q6J("formGroup",t.checkoutForm),e.xp6(5),e.s9C("value",t.formValues.productTitle),e.xp6(4),e.Q6J("ngModel",t.formValues.name),e.xp6(1),e.Q6J("ngIf",(null==(u=t.checkoutForm.get("name"))?null:u.invalid)&&((null==(u=t.checkoutForm.get("name"))?null:u.touched)||(null==(u=t.checkoutForm.get("name"))?null:u.dirty))&&(null==(u=t.checkoutForm.get("name"))||null==u.errors?null:u.errors.required)),e.xp6(1),e.Q6J("ngIf",null==(l=t.checkoutForm.get("name"))||null==l.errors?null:l.errors.pattern),e.xp6(4),e.Q6J("ngModel",t.formValues.last_name),e.xp6(1),e.Q6J("ngIf",(null==(s=t.checkoutForm.get("last_name"))?null:s.invalid)&&((null==(s=t.checkoutForm.get("last_name"))?null:s.touched)||(null==(s=t.checkoutForm.get("last_name"))?null:s.dirty))&&(null==(s=t.checkoutForm.get("last_name"))||null==s.errors?null:s.errors.required)),e.xp6(1),e.Q6J("ngIf",null==(h=t.checkoutForm.get("last_name"))||null==h.errors?null:h.errors.pattern),e.xp6(4),e.Q6J("ngModel",t.formValues.phone),e.xp6(1),e.Q6J("ngIf",(null==(d=t.checkoutForm.get("phone"))?null:d.invalid)&&((null==(d=t.checkoutForm.get("phone"))?null:d.touched)||(null==(d=t.checkoutForm.get("phone"))?null:d.dirty))&&(null==(d=t.checkoutForm.get("phone"))||null==d.errors?null:d.errors.required)),e.xp6(1),e.Q6J("ngIf",null==(v=t.checkoutForm.get("phone"))||null==v.errors?null:v.errors.pattern),e.xp6(4),e.Q6J("ngModel",t.formValues.country),e.xp6(1),e.Q6J("ngIf",(null==(c=t.checkoutForm.get("country"))?null:c.invalid)&&((null==(c=t.checkoutForm.get("country"))?null:c.touched)||(null==(c=t.checkoutForm.get("country"))?null:c.dirty))&&(null==(c=t.checkoutForm.get("country"))||null==c.errors?null:c.errors.required)),e.xp6(4),e.Q6J("ngModel",t.formValues.zip),e.xp6(1),e.Q6J("ngIf",(null==(m=t.checkoutForm.get("zip"))?null:m.invalid)&&((null==(m=t.checkoutForm.get("zip"))?null:m.touched)||(null==(m=t.checkoutForm.get("zip"))?null:m.dirty))&&(null==(m=t.checkoutForm.get("zip"))||null==m.errors?null:m.errors.required)),e.xp6(4),e.Q6J("ngModel",t.formValues.address),e.xp6(1),e.Q6J("ngIf",(null==(p=t.checkoutForm.get("address"))?null:p.invalid)&&((null==(p=t.checkoutForm.get("address"))?null:p.touched)||(null==(p=t.checkoutForm.get("address"))?null:p.dirty))&&(null==(p=t.checkoutForm.get("address"))||null==p.errors?null:p.errors.required)),e.xp6(1),e.Q6J("ngIf",null==(Z=t.checkoutForm.get("address"))||null==Z.errors?null:Z.errors.pattern),e.xp6(4),e.Q6J("ngModel",t.formValues.comment),e.xp6(2),e.Q6J("disabled",n.invalid)}}const $=[{path:"",component:(()=>{class o{constructor(n,t,u,l,s,h,d){this.fb=t,this.activatedRoute=u,this.productService=l,this.orderService=s,this.modalService=h,this.router=d,this.dataOk="",this.name="",this.dataNull="",this.dataErr="",this.modalService1=(0,e.f3M)(f.FF),this.errorOrder=null,this.modalSubscription=null,this.modalText="",this.checkoutForm=this.fb.group({product:[""],name:["",[i.kI.required,i.kI.pattern("^[a-zA-Z\u0430-\u044f\u0410-\u042f]+$")]],last_name:["",[i.kI.required,i.kI.pattern("^[a-zA-Z\u0430-\u044f\u0410-\u042f]+$")]],phone:["",[i.kI.required,i.kI.pattern("^[+][0-9]{11}$")]],country:["",i.kI.required],address:["",[i.kI.required,i.kI.pattern("^[a-zA-Z \u0430-\u044f\u0410-\u042f0-9-/s]+$")]],zip:["",i.kI.required],comment:[""]}),this.formValues={name:"",last_name:"",phone:"",country:"",zip:"",productTitle:"",address:"",comment:""},this.subscription=null,this.subscriptionOrder=null,this.closeResult="",this.modalObservable=new A.y(v=>{setTimeout(()=>{v.next()},3e3)})}ngOnInit(){}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscriptionOrder?.unsubscribe(),console.log("unsubscribe: order")}ngAfterViewInit(){this.modalService.open(this.popup,{}),this.errorOrder=document.getElementById("errorOrder"),this.subscription=this.activatedRoute.queryParams.subscribe(n=>{if(n.product)this.formValues.productTitle=n.product;else{const t=this.modalService1.open(g);t.componentInstance.name="\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443! \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0447\u0430\u0439!",t.result.then(u=>{this.closeResult=`Dismissed ${u}`,this.modalService.dismissAll(),this.router.navigate(["/products"])})}}),this.errorOrder&&(this.errorOrder.style.display="none")}createOrder(){if(!this.formValues.productTitle){this.open(this.popupInfo,"\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443! \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0447\u0430\u0439!");const n=this.modalService1.open(g);return n.componentInstance.name="\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443! \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0447\u0430\u0439!",void n.result.then(t=>{this.closeResult=`Dismissed ${t}`,this.modalService.dismissAll(),this.router.navigate(["/products"])})}this.subscriptionOrder=this.orderService.sendOrder({name:this.formValues.name,last_name:this.formValues.last_name,phone:this.formValues.phone,country:this.formValues.country,zip:this.formValues.zip,product:this.formValues.productTitle,address:this.formValues.address,comment:this.formValues.comment}).subscribe({next:n=>{if(n.success&&!n.message){const t=this.modalService1.open(g);t.componentInstance.name="\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437!",t.result.then(u=>{"success"===u&&this.router.navigate(["/"])},u=>{this.router.navigate(["/"]),this.closeResult=`Dismissed ${u}`,this.modalService1.dismissAll(),this.modalService.dismissAll()}),this.formValues={name:"",last_name:"",phone:"",country:"",zip:"",productTitle:"",address:"",comment:""}}else this.errorOrder&&(this.errorOrder.style.display="block"),this.modalService1.open(g).componentInstance.name="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.",this.modalSubscription=this.modalObservable.subscribe(()=>{this.modalService1.dismissAll(),console.log("no ok")})},error:n=>{this.router.navigate(["/"])}})}open(n,t){console.log("open"),this.modalService.open(this.popupInfo).componentInstance.name=t,this.modalService.open(n,{size:"sm"})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(f.NM),e.Y36(i.qu),e.Y36(_.gz),e.Y36(y.M),e.Y36(I),e.Y36(f.FF),e.Y36(_.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["order"]],viewQuery:function(n,t){if(1&n&&(e.Gf(x.w,5),e.Gf(g,5),e.Gf(q,5),e.Gf(N,5),e.Gf(J,5),e.Gf(E,5),e.Gf(G,5),e.Gf(V,5)),2&n){let u;e.iGM(u=e.CRH())&&(t.popupFullComponent=u.first),e.iGM(u=e.CRH())&&(t.popupInfoComponent=u.first),e.iGM(u=e.CRH())&&(t.popup=u.first),e.iGM(u=e.CRH())&&(t.popupDataOk=u.first),e.iGM(u=e.CRH())&&(t.popupDataNull=u.first),e.iGM(u=e.CRH())&&(t.popupDataErr=u.first),e.iGM(u=e.CRH())&&(t.popupFull=u.first),e.iGM(u=e.CRH())&&(t.popupInfo=u.first)}},inputs:{dataOk:"dataOk",name:"name",dataNull:"dataNull",dataErr:"dataErr"},decls:2,vars:0,consts:[["popup",""],[1,"order","bg-body-tertiary"],[1,"container"],[1,"modal-dialog","modal-md","text-black",2,"max-width","650px"],["popupOrder",""],[1,"modal-content"],[1,"modal-header","fw-bold","fs-2","justify-content-center","py-4","px-xl-5"],[1,"text-header","w-100","d-flex","justify-content-center"],["type","button","aria-label","Close",1,"btn-close","fs-4",3,"routerLink","click"],[1,"modal-body","p-3"],["id","formOrder","novalidate","",1,"row","g-4","needs-validation","p-2","justify-content-between",3,"formGroup"],["siForm","ngForm"],[1,"col-md-12"],["for","validationCustom01",1,"form-label"],["type","text","id","validationCustom01","disabled","",1,"form-control","p-1",3,"value"],[1,"col-md-4"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control","p-1",3,"ngModel","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["for","validationCustom03",1,"form-label"],["type","text","id","validationCustom03","required","","formControlName","last_name",1,"form-control","p-1",3,"ngModel","ngModelChange"],["for","validationCustom04",1,"form-label"],["type","text","id","validationCustom04","formControlName","phone",1,"form-control","p-1",3,"ngModel","ngModelChange"],[1,"col-md-6"],["for","validationCustom05",1,"form-label"],["type","text","id","validationCustom05","formControlName","country",1,"form-control","p-1",3,"ngModel","ngModelChange"],["for","validationCustom06",1,"form-label"],["type","text","id","validationCustom06","formControlName","zip",1,"form-control","p-1",3,"ngModel","ngModelChange"],["for","validationCustom07",1,"form-label"],["type","text","id","validationCustom07","formControlName","address",1,"form-control","p-1",3,"ngModel","ngModelChange"],["class","w-100 invalid-feedback",4,"ngIf"],["for","validationCustom08",1,"form-label"],["type","text","id","validationCustom08","formControlName","comment",1,"form-control","p-1",3,"ngModel","ngModelChange"],[1,"col","justify-content-between"],[1,"btn","btn-primary","py-2","px-4","border","rounded-1",3,"disabled","click"],["id","errorOrder",1,"errorOrder","text-danger","mt-2"],[1,"invalid-feedback"],[1,"w-100","invalid-feedback"]],template:function(n,t){1&n&&e.YNc(0,P,59,22,"ng-template",null,0,e.W1O)},dependencies:[M.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,_.rH,C.MU,C.oH]}),o})()}];let O=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[_.Bz.forChild($),_.Bz]}),o})();var j=a(4466);let L=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[M.ez,j.m,_.Bz,i.u5,O,f.bz,f.IJ,C.VN,O]}),o})()}}]);